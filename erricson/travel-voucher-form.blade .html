<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Form - Travel Order Leave Request</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link rel="shortcut icon" href="assets/img/1468464_logo_1702367337_n-removebg-preview.png" type="image/x-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.gstatic.com" rel="preconnect">
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet">
    <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet">
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>


    <!-- =======================================================
  * Template Name: NiceAdmin
  * Updated: Sep 18 2023 with Bootstrap v5.3.2
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>
<div class="card">
    <div class="card-body" style="background-color: #fffdfa;">
        <h5 class="card-title text-center">PAYMENT VOUCHER</h5>

        <!-- Multi Columns Form -->
        <form class="needs-validation row g-3" id="voucher_form">
            <div class="card">
                <div class="card-body">
                    <div class="row pt-3">
                        <div class="col-md-4 mb-4">
                            <label for="paidto" class="form-label text-primary">Paid to</label><span
                                class="text-danger"> *</span>
                            <input type="text" class="form-control" id="paidto" name="paid_to" required>
                            <div class="invalid-feedback">
                                Please enter your whom you Paid to
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label for="emplnumber" class="form-label text-primary">Employee Number</label><span
                                class="text-danger">
                                *</span>
                            <input type="text" class="form-control" id="emplnumber" name="employee_number" required>
                            <div class="invalid-feedback">
                                Please enter your Employee Number
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label for="date" class="form-label text-primary">Date</label><span class="text-danger">
                                *</span>
                            <input type="date" class="form-control" id="date" name="date" value="{{date('Y-m-d')}}"
                                required>
                            <div class="invalid-feedback">
                                Please enter Date.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container mt-3">
                <!-- Your existing form here -->
                <div class="card">
                    <div class="card-body">
                <div class="row">
                    <div class="col-lg-12">
                        <h5 class="card-title">Enter Amount Details:
                            <button type="button" id="addFieldButton" class="btn btn-success btn-sm p-0.5">Add</button>
                            <button type="button" id="deleteFieldButton" class="btn btn-danger btn-sm p-0.5">Delete</button>
                        </h5>
                    </div>
                </div>

                <div class="fields-container">
                    <div class="fields-set">

                        <div class="row ">
                            <div class="col-12">
                                <label for="description" class="form-label text-primary">Description</label>
                                <textarea name="description" class="form-control" id="description" cols="20" rows="2" name="description[]"></textarea>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-3">
                                <label for="AccountNumber" class="form-label text-primary">Account Number</label>
                                <input type="text" class="form-control" id="AccountNumber"  name="account_number[]">
                            </div>
                            <div class="col-sm-3">
                                <label for="BeforeVAT" class="form-label text-primary">Before VAT</label>
                                <input type="text" class="form-control" id="BeforeVAT" name="before_vat[]">
                            </div>
                            <div class="col-sm-3">
                                <label for="Vat" class="form-label text-primary">Vat 15%</label>
                                <input type="text" class="form-control" id="Vat"  name="vat[]">
                            </div>
                            <div class="col-sm-3">
                                <label for="Amount" class="form-label text-primary">Amount (SAR)</label>
                                <input type="text" class="form-control" id="Amount" name="amount[]">
                            </div>
                        </div>
                    </div>
                </div>

                    </div>
                </div>
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-primary">Submit</button>
                <button type="reset" class="btn btn-secondary">Reset</button>
            </div>

        </form><!-- End Multi Columns Form -->
    </div>
</div>
<script>
    $(document).ready(function () {
        // Add button click event
        $("#addFieldButton").on("click", function () {
            // Clone the entire set of fields
            var clonedFields = $(".fields-set:first").clone();

            // Clear input values in the cloned fields
            clonedFields.find(':input').val('');

            // Wrap the cloned fields in a container
            var clonedContainer = $('<div class="fields-set"> --------- </div>').append(clonedFields);

            // Add spacing (margin) between newly generated fieldsets
            clonedContainer.css('margin-top', '30px');

            // Append the cloned container after the last set of fields
            $(".fields-container").append(clonedContainer);
        });
        jQuery('#deleteFieldButton').click(function () {
            if (jQuery('.fields-container>.fields-set').length > 1) {
                jQuery('.fields-container>.fields-set:last').remove();
            }
        });
    });

    $('#voucher_form').on('submit', function (e) {
        e.preventDefault();
        var data = $('#voucher_form').serializeArray();

        $.ajaxSetup({
            headers: {
                'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
        });
        $.ajax({
            url: "{{Route('insert-voucher')}}",
            method: "POST",
            headers: { 'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content') },
            async: true,
            dataType: 'text',
            data: data, //{Invoice_ID: $(this).data('invoice'), Transaction_Number: $(this).data('transaction')},
            success: function (data) {

                $('#app-modal-body').html('Form Submitted');
                //console.log(data);
                //ele.parent('div').parent('div').parent('td').siblings('.td-trans-' + target_lang).children('div').find('.txt_Description_' + target_lang.toUpperCase()).val(data);
            },
            error: function (data) {
                $('#app-modal-body').html('Could Not Connect the Server');
                console.log("Could Not Connect the Server");
            }
        });

    });

</script>